<?xml version="1.0" encoding="utf-8"?>
<!--
  LOADING STATE PATTERN: SENTINEL VALUES

  RULE: If user.id = "" AND user.authToken = "", user is NOT authenticated
  RULE: If user.id <> "", user IS authenticated and loaded

  User node only exists in m.global.user after successful login.
  Empty configuration/policy fields are VALID defaults.
-->
<component name="JellyfinUser" extends="ContentNode">
  <interface>
    <!-- User Identity (id inherited from ContentNode) -->
    <field id="name" type="string" value="" />
    <field id="friendlyName" type="string" value="" />

    <!-- Authentication -->
    <field id="authToken" type="string" value="" />
    <field id="primaryImageTag" type="string" value="" />

    <!-- Server-Authoritative Data (nested content nodes, NEVER loaded from registry) -->
    <field id="config" type="node" />
    <field id="policy" type="node" />

    <!-- User Settings (nested node) -->
    <field id="settings" type="node" />

    <!-- App State -->
    <field id="lastRunVersion" type="string" value="" />
    <field id="fontScaleFactor" type="float" value="1.0" />

    <!-- DEBUG ONLY: Raw data for debugging - only populated when bs_const=debug=true -->
    <field id="rawUserData" type="assocarray" />
  </interface>
</component>